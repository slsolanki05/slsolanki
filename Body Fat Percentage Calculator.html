<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Body Fat Percentage Calculator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            width: 100%;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }

        header {
            background: linear-gradient(to right, #2c3e50, #4a6491);
            color: white;
            padding: 25px;
            text-align: center;
        }

        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .calculator {
            padding: 30px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        @media (max-width: 768px) {
            .calculator {
                grid-template-columns: 1fr;
            }
        }

        .input-section, .results-section {
            display: flex;
            flex-direction: column;
        }

        .method-selector {
            margin-bottom: 25px;
        }

        .method-selector h3 {
            margin-bottom: 15px;
            color: #2c3e50;
        }

        .method-options {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .method-option {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .method-option input {
            width: auto;
        }

        .input-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }

        input, select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        input:focus, select:focus {
            border-color: #3498db;
            outline: none;
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }

        .measurement-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .calculate-btn {
            background: linear-gradient(to right, #3498db, #2c3e50);
            color: white;
            border: none;
            padding: 15px;
            font-size: 18px;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
            transition: transform 0.2s, box-shadow 0.2s;
            font-weight: 600;
            margin-top: 10px;
        }

        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .calculate-btn:active {
            transform: translateY(0);
        }

        .result {
            background-color: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            display: none;
            border-left: 5px solid #3498db;
        }

        .result.active {
            display: block;
        }

        .result h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            text-align: center;
        }

        .result-value {
            text-align: center;
            margin-bottom: 25px;
        }

        .percentage {
            font-size: 3.5rem;
            font-weight: bold;
            color: #e74c3c;
            line-height: 1;
        }

        .category {
            font-size: 1.5rem;
            color: #2c3e50;
            margin-top: 10px;
        }

        .result-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .result-item {
            background-color: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
            text-align: center;
        }

        .result-label {
            font-size: 14px;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        .result-data {
            font-size: 18px;
            font-weight: bold;
            color: #2c3e50;
        }

        .progress-container {
            margin: 25px 0;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }

        .progress-bar {
            height: 20px;
            background-color: #ecf0f1;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, #2ecc71, #f1c40f, #e74c3c);
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        .category-info {
            background-color: #e8f6f3;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            border-left: 4px solid #2ecc71;
        }

        .category-info h4 {
            color: #27ae60;
            margin-bottom: 10px;
        }

        .category-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .category-table th, .category-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #e1e8ed;
        }

        .category-table th {
            background-color: #f8f9fa;
            font-weight: 600;
        }

        .highlight {
            background-color: #fff9e6;
            font-weight: bold;
        }

        .method-info {
            margin-top: 20px;
            padding: 15px;
            background-color: #e8f4fc;
            border-radius: 8px;
            border-left: 4px solid #3498db;
        }

        .method-info h4 {
            color: #2980b9;
            margin-bottom: 8px;
        }

        .history {
            margin-top: 30px;
        }

        .history h3 {
            color: #2c3e50;
            margin-bottom: 15px;
        }

        .history-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 15px;
            background-color: white;
            border-radius: 8px;
            margin-bottom: 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Body Fat Percentage Calculator</h1>
            <p class="subtitle">Estimate your body composition and track your fitness progress</p>
        </header>
        
        <div class="calculator">
            <div class="input-section">
                <div class="method-selector">
                    <h3>Calculation Method</h3>
                    <div class="method-options">
                        <div class="method-option">
                            <input type="radio" id="navy" name="method" value="navy" checked>
                            <label for="navy">U.S. Navy Method</label>
                        </div>
                        <div class="method-option">
                            <input type="radio" id="bmi" name="method" value="bmi">
                            <label for="bmi">BMI Method</label>
                        </div>
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="gender">Gender</label>
                    <select id="gender" required>
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label for="age">Age</label>
                    <input type="number" id="age" min="18" max="80" value="30" required>
                </div>
                
                <div class="input-group">
                    <label for="height">Height</label>
                    <div class="measurement-inputs">
                        <div>
                            <input type="number" id="heightFeet" min="1" max="8" value="5" placeholder="Feet">
                            <span class="unit-label">ft</span>
                        </div>
                        <div>
                            <input type="number" id="heightInches" min="0" max="11" value="9" placeholder="Inches">
                            <span class="unit-label">in</span>
                        </div>
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="weight">Weight</label>
                    <input type="number" id="weight" min="50" max="500" value="160" required>
                    <span class="unit-label">pounds (lbs)</span>
                </div>
                
                <div id="navyInputs">
                    <div class="input-group">
                        <label for="waist">Waist Circumference</label>
                        <input type="number" id="waist" min="20" max="80" value="32" step="0.1">
                        <span class="unit-label">inches (at navel)</span>
                    </div>
                    
                    <div class="input-group">
                        <label for="neck">Neck Circumference</label>
                        <input type="number" id="neck" min="10" max="30" value="15" step="0.1">
                        <span class="unit-label">inches</span>
                    </div>
                    
                    <div id="femaleInputs" style="display: none;">
                        <div class="input-group">
                            <label for="hip">Hip Circumference</label>
                            <input type="number" id="hip" min="20" max="80" value="36" step="0.1">
                            <span class="unit-label">inches (at fullest part)</span>
                        </div>
                    </div>
                </div>
                
                <button id="calculateBtn" class="calculate-btn">Calculate Body Fat Percentage</button>
            </div>
            
            <div class="results-section">
                <div id="result" class="result">
                    <h2>Your Body Fat Analysis</h2>
                    
                    <div class="result-value">
                        <div class="percentage" id="bfPercentage">0%</div>
                        <div class="category" id="bfCategory">-</div>
                    </div>
                    
                    <div class="progress-container">
                        <div class="progress-label">
                            <span>Essential Fat</span>
                            <span>Obese</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill" style="width: 0%;"></div>
                        </div>
                    </div>
                    
                    <div class="result-grid">
                        <div class="result-item">
                            <div class="result-label">Fat Mass</div>
                            <div class="result-data" id="fatMass">-</div>
                        </div>
                        <div class="result-item">
                            <div class="result-label">Lean Mass</div>
                            <div class="result-data" id="leanMass">-</div>
                        </div>
                        <div class="result-item">
                            <div class="result-label">BMI</div>
                            <div class="result-data" id="bmiValue">-</div>
                        </div>
                        <div class="result-item">
                            <div class="result-label">Ideal Range</div>
                            <div class="result-data" id="idealRange">-</div>
                        </div>
                    </div>
                    
                    <div class="category-info">
                        <h4>Body Fat Categories</h4>
                        <table class="category-table">
                            <thead>
                                <tr>
                                    <th>Category</th>
                                    <th>Women</th>
                                    <th>Men</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Essential Fat</td>
                                    <td>10-13%</td>
                                    <td>2-5%</td>
                                </tr>
                                <tr>
                                    <td>Athletes</td>
                                    <td>14-20%</td>
                                    <td>6-13%</td>
                                </tr>
                                <tr>
                                    <td>Fitness</td>
                                    <td>21-24%</td>
                                    <td>14-17%</td>
                                </tr>
                                <tr>
                                    <td>Average</td>
                                    <td>25-31%</td>
                                    <td>18-24%</td>
                                </tr>
                                <tr>
                                    <td>Obese</td>
                                    <td>32%+</td>
                                    <td>25%+</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="method-info">
                        <h4>About the Calculation Method</h4>
                        <p id="methodDescription">The U.S. Navy method uses circumference measurements to estimate body fat percentage. It's a practical method that provides a reasonable estimate for most people.</p>
                    </div>
                </div>
                
                <div class="history">
                    <h3>Calculation History</h3>
                    <div id="historyList">
                        <!-- History items will be added here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // DOM elements
        const methodRadios = document.querySelectorAll('input[name="method"]');
        const genderSelect = document.getElementById('gender');
        const navyInputs = document.getElementById('navyInputs');
        const femaleInputs = document.getElementById('femaleInputs');
        const calculateBtn = document.getElementById('calculateBtn');
        const resultDiv = document.getElementById('result');
        const bfPercentage = document.getElementById('bfPercentage');
        const bfCategory = document.getElementById('bfCategory');
        const progressFill = document.getElementById('progressFill');
        const fatMass = document.getElementById('fatMass');
        const leanMass = document.getElementById('leanMass');
        const bmiValue = document.getElementById('bmiValue');
        const idealRange = document.getElementById('idealRange');
        const methodDescription = document.getElementById('methodDescription');
        const historyList = document.getElementById('historyList');

        // Event listeners
        methodRadios.forEach(radio => {
            radio.addEventListener('change', toggleMethod);
        });

        genderSelect.addEventListener('change', toggleGenderInputs);
        calculateBtn.addEventListener('click', calculateBodyFat);

        // Toggle between calculation methods
        function toggleMethod() {
            const method = document.querySelector('input[name="method"]:checked').value;
            
            if (method === 'bmi') {
                navyInputs.style.display = 'none';
                methodDescription.textContent = "The BMI method estimates body fat percentage based on your Body Mass Index. While less accurate than circumference methods, it provides a quick estimate.";
            } else {
                navyInputs.style.display = 'block';
                methodDescription.textContent = "The U.S. Navy method uses circumference measurements to estimate body fat percentage. It's a practical method that provides a reasonable estimate for most people.";
            }
        }

        // Toggle female-specific inputs
        function toggleGenderInputs() {
            const gender = genderSelect.value;
            
            if (gender === 'female') {
                femaleInputs.style.display = 'block';
            } else {
                femaleInputs.style.display = 'none';
            }
        }

        // Calculate body fat percentage
        function calculateBodyFat() {
            // Get input values
            const method = document.querySelector('input[name="method"]:checked').value;
            const gender = genderSelect.value;
            const age = parseInt(document.getElementById('age').value);
            const heightFeet = parseInt(document.getElementById('heightFeet').value);
            const heightInches = parseInt(document.getElementById('heightInches').value);
            const weight = parseFloat(document.getElementById('weight').value);
            
            // Calculate height in inches
            const height = (heightFeet * 12) + heightInches;
            
            let bodyFatPercentage;
            
            if (method === 'navy') {
                // U.S. Navy Method
                const waist = parseFloat(document.getElementById('waist').value);
                const neck = parseFloat(document.getElementById('neck').value);
                
                if (gender === 'male') {
                    bodyFatPercentage = 86.010 * Math.log10(waist - neck) - 70.041 * Math.log10(height) + 36.76;
                } else {
                    const hip = parseFloat(document.getElementById('hip').value);
                    bodyFatPercentage = 163.205 * Math.log10(waist + hip - neck) - 97.684 * Math.log10(height) - 78.387;
                }
            } else {
                // BMI Method
                const bmi = (weight / (height * height)) * 703;
                bodyFatPercentage = (1.20 * bmi) + (0.23 * age) - (10.8 * (gender === 'male' ? 1 : 0)) - 5.4;
            }
            
            // Ensure body fat percentage is within reasonable bounds
            bodyFatPercentage = Math.max(2, Math.min(50, bodyFatPercentage));
            
            // Calculate additional metrics
            const fatMassValue = (bodyFatPercentage / 100) * weight;
            const leanMassValue = weight - fatMassValue;
            
            // Calculate BMI
            const bmi = (weight / (height * height)) * 703;
            
            // Determine body fat category
            const category = getBodyFatCategory(bodyFatPercentage, gender);
            
            // Update progress bar
            updateProgressBar(bodyFatPercentage, gender);
            
            // Display results
            displayResults(bodyFatPercentage, category, fatMassValue, leanMassValue, bmi, gender);
            
            // Add to history
            addToHistory(bodyFatPercentage, category, method);
        }

        // Determine body fat category
        function getBodyFatCategory(percentage, gender) {
            if (gender === 'male') {
                if (percentage < 6) return 'Essential Fat';
                if (percentage < 14) return 'Athlete';
                if (percentage < 18) return 'Fitness';
                if (percentage < 25) return 'Average';
                return 'Obese';
            } else {
                if (percentage < 14) return 'Essential Fat';
                if (percentage < 21) return 'Athlete';
                if (percentage < 25) return 'Fitness';
                if (percentage < 32) return 'Average';
                return 'Obese';
            }
        }

        // Update progress bar based on body fat percentage
        function updateProgressBar(percentage, gender) {
            // Adjust progress based on gender-specific ranges
            let progressWidth;
            if (gender === 'male') {
                // Men: 2% to 40%+
                progressWidth = ((percentage - 2) / 38) * 100;
            } else {
                // Women: 10% to 50%+
                progressWidth = ((percentage - 10) / 40) * 100;
            }
            
            // Ensure progress is between 0 and 100
            progressWidth = Math.max(0, Math.min(100, progressWidth));
            progressFill.style.width = `${progressWidth}%`;
        }

        // Display calculation results
        function displayResults(percentage, category, fatMassValue, leanMassValue, bmi, gender) {
            bfPercentage.textContent = `${percentage.toFixed(1)}%`;
            bfCategory.textContent = category;
            fatMass.textContent = `${fatMassValue.toFixed(1)} lbs`;
            leanMass.textContent = `${leanMassValue.toFixed(1)} lbs`;
            bmiValue.textContent = bmi.toFixed(1);
            
            // Set ideal range based on gender
            if (gender === 'male') {
                idealRange.textContent = '8-19%';
            } else {
                idealRange.textContent = '21-33%';
            }
            
            // Show result section
            resultDiv.classList.add('active');
        }

        // Add calculation to history
        function addToHistory(percentage, category, method) {
            const now = new Date();
            const dateStr = now.toLocaleDateString() + ' ' + now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            
            const historyItem = document.createElement('div');
            historyItem.className = 'history-item';
            historyItem.innerHTML = `
                <div>
                    <strong>${percentage.toFixed(1)}%</strong>
                    <div class="history-details">${category} • ${method.toUpperCase()}</div>
                </div>
                <div class="history-date">${dateStr}</div>
            `;
            
            historyList.insertBefore(historyItem, historyList.firstChild);
            
            // Keep only last 5 entries
            if (historyList.children.length > 5) {
                historyList.removeChild(historyList.lastChild);
            }
        }

        // Initialize the calculator
        function initCalculator() {
            toggleMethod();
            toggleGenderInputs();
            
            // Add some sample history items
            const sampleItems = [
                { percentage: 18.5, category: 'Fitness', method: 'navy', date: '2023-10-15' },
                { percentage: 19.2, category: 'Fitness', method: 'navy', date: '2023-09-28' },
                { percentage: 20.1, category: 'Average', method: 'bmi', date: '2023-09-10' }
            ];
            
            sampleItems.forEach(item => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item';
                historyItem.innerHTML = `
                    <div>
                        <strong>${item.percentage}%</strong>
                        <div class="history-details">${item.category} • ${item.method.toUpperCase()}</div>
                    </div>
                    <div class="history-date">${item.date}</div>
                `;
                historyList.appendChild(historyItem);
            });
        }

        // Initialize when page loads
        window.addEventListener('load', initCalculator);
    </script>
</body>
</html>